<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title></title>
<style>
input[type="number"] {
    width: 40px;
}
</style>
<script>
var datas = []
document.addEventListener('DOMContentLoaded', init);
function init() {
    function $(id) {
        return document.getElementById(id);
    }
    $("new-button").addEventListener('click', function(e) {
        datas.push({
            startBalls: 0,
            startRolls: 0,
            endBalls: 0,
            endRolls: 0,            
        });
        updateView()
    });  
    document.body.addEventListener('click', function(e) {
        if(e.target.id.startsWith('remove')) {
            var id = e.target.id;
            var splits = id.split("-");
            if(splits.length != 2) { return; }
            var index = Number(splits[1]);
            datas.splice(index, 1); 
            updateView();
        }
    });
    document.body.addEventListener('input', function(e) {
        var value = e.target.value;
        // 非負整数のみ許可（空文字も一時的に許容）
        if(!/^\d*$/.test(value)) {
            e.target.value = value.replace(/[^\d]/g, '');
        }
    });
}
function save() {

}
function load() {

}
function updateView() {
    function $(id) {
        return document.getElementById(id);
    }
    let html = "";
    for(i = datas.length - 1; i >= 0; i -= 1) {
        data = datas[i];
        html += '<div>';
        html += '<input id="startBalls-' + i + '" type="number" value="' + data.startBalls + '">&nbsp;';
        html += '<input id="startRolls-' + i + '" type="number" value="' + data.startRolls + '">&nbsp;';
        html += '<input id="endBalls-' + i + '" type="number" value="' + data.endBalls + '">&nbsp;';
        html += '<input id="endRolls-' + i + '" type="number" value="' + data.endRolls + '">&nbsp;';
        html += '<input id="remove-' + i + '" type="button" value="Remove">&nbsp;';
        html += '</div>';
    }
    $("data-area").innerHTML = html;
}
</script>
</head>
<body>v2
    <div id="roll-area"></div>
    <input id="new-button" type="button" value="New">
    <div id="data-area">

    </div>
</body>
</html>